<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MunTech - School Management System. A modern, culturally-inspired platform for educational excellence.">
    <meta name="theme-color" content="#8D6E63">
    <title>{% block title %}MunTech School System{% endblock %}</title>
    
    {% load static %}
    
    <!-- DESIGN SYSTEM CSS -->
    <link href="{% static 'css/design-tokens.css' %}" rel="stylesheet">
    <link href="{% static 'css/components.css' %}" rel="stylesheet">
    <link href="{% static 'css/navbar.css' %}" rel="stylesheet">
    <link href="{% static 'css/footer.css' %}" rel="stylesheet">
    <link href="{% static 'css/animations.css' %}" rel="stylesheet">
    <link href="{% static 'css/dark-mode.css' %}" rel="stylesheet">
    
    <!-- Additional Styles -->
    {% block extra_css %}{% endblock %}
    
    <!-- Icons (optional Bootstrap Icons or custom set) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Preload fonts for better performance -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="{% block body_class %}{% endblock %}" style="display: flex; flex-direction: column; min-height: 100vh;">

    {% if not 'auth-page' in block.super %}
    <!-- MODERN NAVIGATION -->
    <nav class="navbar">
        <div class="navbar-container">
            <!-- Brand -->
            <a class="navbar-brand" href="/">
                <span class="navbar-brand-icon">üéì</span>
                <span>MunTech</span>
            </a>
            
            <!-- Mobile Toggle -->
            <button class="navbar-toggle" aria-label="Toggle navigation" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <!-- Navigation Items -->
            <ul class="navbar-nav">
                {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard/">
                            <i class="bi bi-speedometer2"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#modules">
                            <i class="bi bi-grid-3x3-gap"></i>
                            Modules
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'admissions:index' %}"><i class="bi bi-file-text"></i>Admissions</a></li>
                            <li><a class="dropdown-item" href="{% url 'attendance:index' %}"><i class="bi bi-hand-thumbs-up"></i>Attendance</a></li>
                            <li><a class="dropdown-item" href="{% url 'examinations:index' %}"><i class="bi bi-pencil-square"></i>Examinations</a></li>
                            <li><a class="dropdown-item" href="{% url 'fees:index' %}"><i class="bi bi-wallet2"></i>Fees</a></li>
                            <li><a class="dropdown-item" href="{% url 'payments:index' %}"><i class="bi bi-credit-card"></i>Payments</a></li>
                            <li><a class="dropdown-item" href="{% url 'payments:parent_portal' %}"><i class="bi bi-person-check"></i>Parent Portal</a></li>
                            {% if user.student %}
                            <li><a class="dropdown-item" href="{% url 'dashboard:student_dashboard' %}"><i class="bi bi-book"></i>Student Portal</a></li>
                            {% endif %}
                            {% if user.teacher %}
                            <li><a class="dropdown-item" href="{% url 'dashboard:teacher_dashboard' %}"><i class="bi bi-chalkboard-user"></i>Teacher Portal</a></li>
                            {% endif %}
                            <li><div class="dropdown-divider"></div></li>
                            <li><a class="dropdown-item" href="#settings"><i class="bi bi-gear"></i>Settings</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#profile">
                            <i class="bi bi-person-circle"></i>
                            {{ user.first_name|default:user.username }}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-gear"></i>Settings</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-question-circle"></i>Help</a></li>
                            <li><div class="dropdown-divider"></div></li>
                            <li><a class="dropdown-item" href="{% url 'account_logout' %}"><i class="bi bi-box-arrow-right"></i>Logout</a></li>
                        </ul>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'account_login' %}">
                            <i class="bi bi-box-arrow-in-right"></i>
                            Sign In
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary" href="{% url 'account_signup' %}" style="text-decoration: none; color: white;">
                            Get Started
                        </a>
                    </li>
                {% endif %}
                
                <!-- Theme Toggle -->
                <li class="nav-item">
                    <button class="theme-toggle" role="button" aria-label="Toggle Dark Mode"></button>
                </li>
            </ul>
        </div>
    </nav>
    {% endif %}

    <!-- ALERTS -->
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} animate-slideDown" role="alert">
            <div class="alert-icon">
                {% if message.tags == 'success' %}‚úì
                {% elif message.tags == 'warning' %}‚ö†Ô∏è
                {% elif message.tags == 'danger' %}‚úï
                {% else %}‚ÑπÔ∏è{% endif %}
            </div>
            <div>
                <strong>{{ message.tags|upper }}</strong>
                <p>{{ message }}</p>
            </div>
        </div>
        {% endfor %}
    {% endif %}

    <!-- MAIN CONTENT -->
    <main style="flex: 1; position: relative;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 var(--spacing-xl);">
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <!-- About Section -->
                <div class="footer-section">
                    <h4>About MunTech</h4>
                    <p style="color: var(--gray-300); margin-bottom: var(--spacing-lg);">
                        A modern school management system designed to empower educational institutions with powerful tools for student success.
                    </p>
                </div>
                
                <!-- Quick Links -->
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="quick-links">
                        <li><a href="/dashboard/">Dashboard</a></li>
                        <li><a href="{% url 'admissions:index' %}">Admissions</a></li>
                        <li><a href="{% url 'attendance:index' %}">Attendance</a></li>
                        <li><a href="{% url 'fees:index' %}">Fee Management</a></li>
                        <li><a href="{% url 'payments:index' %}">Payments</a></li>
                    </ul>
                </div>
                
                <!-- Support -->
                <div class="footer-section">
                    <h4>Support</h4>
                    <div class="contact-info">
                        <div class="contact-item">
                            <div class="contact-icon">üìß</div>
                            <a href="mailto:support@muntech.edu">support@muntech.edu</a>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">üìû</div>
                            <a href="tel:+1234567890">+1 (234) 567-890</a>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">üìç</div>
                            <span>123 Education Ave, School City, SC 12345</span>
                        </div>
                    </div>
                </div>
                
                <!-- Newsletter -->
                <div class="footer-section">
                    <h4>Newsletter</h4>
                    <p style="color: var(--gray-300); font-size: var(--font-size-sm); margin-bottom: var(--spacing-md);">
                        Get updates on new features and improvements.
                    </p>
                    <form class="newsletter-form" onsubmit="return false;">
                        <input type="email" placeholder="Your email" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            
            <div class="footer-divider"></div>
            
            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <div class="footer-bottom-left">
                    <p>&copy; 2024-2026 MunTech. All rights reserved.</p>
                </div>
                <div class="footer-bottom-right">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Contact Us</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    {% load static %}
    <script src="{% static 'js/app.js' %}" defer></script>
    {% block extra_js %}{% endblock %}
</body>
</html>