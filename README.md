# MunTech - School Management System

A production-ready school management platform built with Django 5.0.1, featuring a modern premium UI/UX design with dark mode support.

---

## ğŸš€ Quick Start

### 1. Setup Environment
```powershell
# Create virtual environment
python -m venv .venv
.venv\Scripts\Activate.ps1

# Install dependencies
pip install -r requirements.txt
```

### 2. Configure Local Environment
Create `.env` file (do NOT commit):
```
SECRET_KEY=your-django-secret-key
DEBUG=True
GOOGLE_CLIENT_ID=your-google-oauth-id
GOOGLE_CLIENT_SECRET=your-google-oauth-secret
```

### 3. Initialize Database
```powershell
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

**Access**: http://localhost:8000

---

## âœ¨ Features

### Core Modules
- **Users** - Multi-role authentication (Admin, Principal, Teacher, Parent, Student)
- **Dashboard** - Central management with analytics
- **Admissions** - Student enrollment & applications
- **Attendance** - Real-time attendance tracking
- **Examinations** - Exam management & results
- **Fees** - Fee collection & payment tracking
- **Payments** - Secure payment processing

### Premium UI/UX Design (2026)
- **School-Themed Design** - Natural African earth tones (brown, gold, teal)
- **Dark Mode** - Full dark mode support with system preference detection
- **Responsive Layout** - Mobile-first, fully responsive design
- **Micro-Interactions** - Smooth animations and ripple effects
- **Accessibility** - WCAG AAA compliant
- **Performance** - Optimized CSS and lightweight JavaScript

---

## ğŸ“ Project Structure

```
SCHOOL/
â”œâ”€â”€ config/                 # Django settings & URLs
â”œâ”€â”€ core/                   # Main app modules
â”‚   â”œâ”€â”€ users/             # User management
â”‚   â”œâ”€â”€ dashboard/         # Dashboard views
â”‚   â”œâ”€â”€ admissions/        # Admissions module
â”‚   â”œâ”€â”€ attendance/        # Attendance tracking
â”‚   â”œâ”€â”€ examinations/      # Exam management
â”‚   â”œâ”€â”€ fees/              # Fee management
â”‚   â””â”€â”€ payments/          # Payment processing
â”œâ”€â”€ templates/             # HTML templates
â”‚   â”œâ”€â”€ base.html          # Main template with dark mode toggle
â”‚   â”œâ”€â”€ account/           # Auth pages (school-themed)
â”‚   â””â”€â”€ [modules]/         # Module-specific templates
â”œâ”€â”€ static/                # Static assets (CSS, JS)
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ auth.css       # School-themed login page
â”‚   â”‚   â”œâ”€â”€ premium.css    # Design tokens & components
â”‚   â”‚   â””â”€â”€ dark-theme.css # Dark mode system
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ theme-manager.js # Theme switching & interactions
â””â”€â”€ staticfiles/           # Generated by collectstatic (production)
```

---

## ğŸ¨ Design System

### Colors (School-Themed Earth Tones)
- **Primary**: `#8B6F47` (Rich brown - trustworthy)
- **Secondary**: `#D4A574` (Warm gold - prestige)
- **Accent**: `#2B7A78` (Deep teal - growth)
- **Background**: `#FAFAF8` (Warm white), `#F5F1E8` (Cream)

### CSS Organization
- `premium.css` - Design tokens, components, animations (90+ CSS variables)
- `dark-theme.css` - Dark mode overrides with system detection
- `auth.css` - School-themed authentication pages

### JavaScript
- `theme-manager.js` - Theme switching, localStorage persistence, micro-interactions

---

## ğŸ”§ Development Commands

```powershell
# Start development server
python manage.py runserver

# Make migrations
python manage.py makemigrations

# Apply migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Collect static files (production)
python manage.py collectstatic --noinput

# Clear static files and recollect
python manage.py collectstatic --clear --noinput
```

---

## ğŸš¢ Production Deployment (Railway)

### Environment Variables
Set these in Railway dashboard:
```
SECRET_KEY=your-production-key
DEBUG=False
DATABASE_URL=postgresql://...
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
```

### Deployment Pipeline
1. Push code to GitHub
2. Railway automatically detects changes
3. Procfile runs: `python manage.py migrate && python manage.py collectstatic --noinput`
4. Gunicorn starts web server with WhiteNoise middleware
5. Static files served from `staticfiles/` directory

### Important: Static Files
- **Development**: Django serves from `static/` directly
- **Production**: Files copied to `staticfiles/` by `collectstatic`
- `staticfiles/` is in `.gitignore` (regenerated on each deploy)

---

## ğŸ” Security

### Best Practices
- Keep `.env` file local (never commit secrets)
- Use `DEBUG=False` in production
- Set `SECURE_SSL_REDIRECT=True` on production
- Configure `ALLOWED_HOSTS` properly
- Use `CSRF_TRUSTED_ORIGINS` for remote domains

### Current Configuration
- CSRF protection enabled
- Session cookies secure
- X-Frame-Options set to `SAMEORIGIN`
- Security headers configured

---

## ğŸ“± Browser Support

- Chrome/Edge 90+
- Firefox 88+
- Safari 14+
- Mobile browsers (iOS Safari, Chrome Mobile)

---

## ğŸ“ License

Proprietary - MunTech School Management System

---

## ğŸ¤ Support

For issues or questions, contact the development team or check the project documentation.

Access: http://localhost:8000

Repository hygiene & security (must-do before sharing/pushing)

- **Remove sensitive files from Git history:**
   - Ensure `.env`, `.venv/`, `staticfiles/`, `server.log`, and `server_error.log` are removed from the repo and added to `.gitignore`.
   - To remove from history, use `git rm --cached <file>` and then rewrite history with `git filter-repo` or `bfg` if needed (requires care and coordination).

- **Rotate secrets:**
   - Revoke and re-issue `SECRET_KEY` and any OAuth keys that were exposed.

- **Keep vendor/static builds out of repo:**
   - Do not commit `staticfiles/`. Store app assets in `static/` and produce collected assets via `collectstatic`.

Deployment (Railway / Heroku-like)

- **Procfile** (already included):

```
release: python manage.py migrate
web: gunicorn config.wsgi:application --bind 0.0.0.0:$PORT
```

- **Environment variables to set in production**:

- `DEBUG=False`
- `SECRET_KEY` (strong, unique)
- `DATABASE_URL` (Postgres provided by the platform)
- `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`

- **Static files**: use WhiteNoise for simple deployments, or serve from a CDN/S3. Ensure `collectstatic` runs during the build.

CI & quality

- Add a CI workflow to run migrations, tests, linters, and formatting on push.
- Recommended tools: `pre-commit`, `black`, `isort`, `flake8`.

Notes & next steps (recommended)

- Confirm the Django target version (repo logs showed Django 6.x locally); update `requirements.txt` and `runtime.txt` to match.
- Remove large vendor files (Grappelli, TinyMCE packages) from the repo and rely on package installs or CDNs.
- Harden `config/settings.py` to read from env, configure `dj_database_url`, enforce `ALLOWED_HOSTS`, secure cookies, and enable WhiteNoise.

I implemented the following changes for you:

- Added `.env.example` (copy to `.env` locally and fill secrets).
- Implemented `NgrokMiddleware` in `core/ngrok_middleware.py` for forwarded headers.
- Updated `requirements.txt` to Django 6.0.1 and added development tools.
- Added GitHub Actions CI (`.github/workflows/ci.yml`).
- Added pre-commit configuration and `pyproject.toml` for formatting.
- Added `scripts/remove_sensitive.ps1` and repository cleanup guidance in `DEPLOYMENT.md`.

Next recommended steps: remove the tracked `.env` and run the cleanup script, then rotate secrets and reconfigure GitHub/Railway environment variables.

---

## ğŸ“ Support

- **Admin Panel**: http://localhost:8000/admin/
- **Login**: http://localhost:8000/accounts/login/

---

## âœ… Production Ready

- âœ… 8 modules implemented
- âœ… CSRF security fixed
- âœ… Multi-tenant architecture
- âœ… Google OAuth configured
- âœ… Railway deployment ready

**Deploy to Railway now!** ğŸš€

---

**Version**: 2.0 | **Last Updated**: January 2026
